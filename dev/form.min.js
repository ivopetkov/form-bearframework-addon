/*
 * Form addon for Bear Framework
 * https://github.com/ivopetkov/form-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{};
ivoPetkov.bearFrameworkAddons.form=ivoPetkov.bearFrameworkAddons.form||function(){var g=[],h=function(a){return"undefined"!==typeof g[a]?document.querySelector('form[data-form-id="'+a+'"]'):null},l=function(a){var d=h(a);if(null!==d){var b=g[a];if(1!==b.status){var e=function(a,b){if("function"===typeof Event)var c=new Event(a);else c=document.createEvent("Event"),c.initEvent(a,!1,!1);if("undefined"!==typeof b)for(var e in b)c[e]=b[e];e=!1;"true"===d.getAttribute("disabled")&&(d.removeAttribute("disabled"),
e=!0);c=d.dispatchEvent(c);e&&d.setAttribute("disabled","true");return c};e("beforesubmit")&&(b.status=1,k(a,!0),e("submitstart"),clientShortcuts.get("-form-submit").then(function(c){c.submit(d,b,e,function(){b.status=0;k(a,!1)})}))}}},k=function(a,d){var b=h(a);if(null!==b){d?b.setAttribute("disabled","true"):b.removeAttribute("disabled");b=b.querySelectorAll("input, select, textarea");for(var e=b.length,c=0;c<e;c++){var f=b[c];d?(f.setAttribute("disabled","true"),f.ipfrmds=1):"undefined"!==typeof f.ipfrmds&&
(f.removeAttribute("disabled"),delete f.ipfrmds)}}};return{initialize:function(a){var d=a[0];g[d]={serverData:a[1],errorMessage:a[2],status:0};var b=h(d);null!==b&&(b.submit=function(){l(d)},a=function(a){var c=b.getAttribute("on"+a);null!==c&&b.addEventListener(a,function(a){(new Function("return function(event){"+c+"}"))().bind(this)(a)})},a("beforesubmit"),a("submitstart"),a("submitend"),a("submitsuccess"),a("submiterror"))},submit:l}}();