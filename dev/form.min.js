/*
 * Form addon for Bear Framework
 * https://github.com/ivopetkov/form-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{};
ivoPetkov.bearFrameworkAddons.form=ivoPetkov.bearFrameworkAddons.form||function(){var d=[],f=function(a){return"undefined"!==typeof d[a]?document.querySelector('form[data-form-id="'+a+'"]'):null},k=function(a){var c=f(a);if(null!==c&&1!==d[a].status){var b=document.createEvent("Event");b.initEvent("beforesubmit",!1,!0);c.dispatchEvent(b)&&(d[a].status=1,h(a,!0),b=document.createEvent("Event"),b.initEvent("submitstart",!1,!1),c.dispatchEvent(b),clientShortcuts.get("-form-submit").then(function(b){b.submit(c,
d[a])}))}},h=function(a,c){var b=f(a);if(null!==b){c?b.setAttribute("disabled","true"):b.removeAttribute("disabled");b=b.querySelectorAll("input, select, textarea");for(var d=b.length,g=0;g<d;g++){var e=b[g];c?(e.setAttribute("disabled","true"),e.ipfrmds=1):"undefined"!==typeof e.ipfrmds&&(e.removeAttribute("disabled"),delete e.ipfrmds)}}};return{initialize:function(a){var c=a[0];d[c]={serverData:a[1],errorMessage:a[2],status:0};var b=f(c);null!==b&&(b.submit=function(){k(c)},a=function(a){var c=
b.getAttribute("on"+a);null!==c&&b.addEventListener(a,function(a){(new Function("return function(event){"+c+"}"))().bind(this)(a)})},a("beforesubmit"),a("submitstart"),a("submitend"),a("submitsuccess"),a("submiterror"),b.addEventListener("submitend",function(){h(c,!1)}))},submit:k}}();